(function(t){function e(e){for(var a,i,r=e[0],c=e[1],l=e[2],d=0,f=[];d<r.length;d++)i=r[d],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&f.push(s[i][0]),s[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(f.length)f.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,r=1;r<n.length;r++){var c=n[r];0!==s[c]&&(a=!1)}a&&(o.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},s={app:0},o=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"03d2":function(t,e,n){},"0954":function(t,e){t.exports="data:image/png;base64,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"},"09a4":function(t,e,n){},"104d":function(t,e,n){"use strict";n("b5cc")},"13de":function(t,e,n){"use strict";n("3e01")},1543:function(t,e,n){"use strict";n.r(e),n.d(e,"db",(function(){return o})),n.d(e,"rtDb",(function(){return c})),n.d(e,"auth",(function(){return i})),n.d(e,"currentUser",(function(){return r})),n.d(e,"usersCollection",(function(){return u})),n.d(e,"friendsCollection",(function(){return d})),n.d(e,"gamesCollection",(function(){return f})),n.d(e,"playersCollection",(function(){return m})),n.d(e,"roomsCollection",(function(){return p})),n.d(e,"notificationsCollection",(function(){return v})),n.d(e,"friendChatCollection",(function(){return g})),n.d(e,"storage",(function(){return l}));var a=n("260b"),s=(n("e71f"),n("66ce"),n("ea7b"),n("588e"),{apiKey:"AIzaSyDW5tcHz8aCO30IFVpLxbggLGYY-Ak6TkQ",authDomain:"partyapp-9961f.firebaseapp.com",databaseURL:"https://partyapp-9961f-default-rtdb.firebaseio.com",projectId:"partyapp-9961f",storageBucket:"partyapp-9961f.appspot.com",messagingSenderId:"19139069320",appId:"1:19139069320:web:70a4805e4847e9d79ca63d",measurementId:Object({NODE_ENV:"production",VUE_APP_API_KEY:"AIzaSyDW5tcHz8aCO30IFVpLxbggLGYY-Ak6TkQ",VUE_APP_APP_ID:"1:19139069320:web:70a4805e4847e9d79ca63d",VUE_APP_AUTH_DOMAIN:"partyapp-9961f.firebaseapp.com",VUE_APP_DATABASE_URL:"https://partyapp-9961f-default-rtdb.firebaseio.com",VUE_APP_MESSAGING_SENDER_ID:"19139069320",VUE_APP_PROJECT_ID:"partyapp-9961f",VUE_APP_STORAGE_BUCKET:"partyapp-9961f.appspot.com",BASE_URL:"/"}).VUE_MEASUREMENT_ID});a["a"].initializeApp(s);var o=a["a"].firestore(),i=a["a"].auth(),r=i.currentUser,c=a["a"].database(),l=a["a"].storage(),u=o.collection("users"),d=o.collection("friends"),f=o.collection("games"),m=o.collection("players"),p=o.collection("rooms"),v=o.collection("notifications"),g=o.collection("friendChat")},"1a9b":function(t,e,n){"use strict";n("03d2")},"1f36":function(t,e,n){},"3a1a":function(t,e,n){"use strict";n("b78a")},"3e01":function(t,e,n){},5244:function(t,e,n){t.exports=n.p+"img/partyapp_logo.e91a1c5c.svg"},5370:function(t,e,n){"use strict";n("c51e")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("04f2"),n("5abe");var a=n("7bb1"),s=n("2b0e"),o=n("574d"),i=n.n(o),r=n("544d"),c=n("10bd"),l=n("b897"),u=n("7e79"),d=n.n(u),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},m=[],p=n("260b"),v=(n("ea7b"),{mounted:function(){var t=this;p["a"].auth().onAuthStateChanged((function(e){e&&(t.$store.commit("setUser",e),t.$store.dispatch("bindUserProfileRef"),t.$store.dispatch("bindGameRef"))}))}}),g=v,h=(n("5c0b"),n("2877")),b=Object(h["a"])(g,f,m,!1,null,null,null),C=b.exports,_=n("9483");Object(_["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var w=n("8c4f"),y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("section",{ref:"asyncImage",staticClass:"sidebar",attrs:{"data-src":"https://firebasestorage.googleapis.com/v0/b/mifiy-2c32c.appspot.com/o/assets%2Fweb%2Fauth%2Flarge%2Flogin.png?alt=media&token=3c2508d5-5498-425d-a6b5-d50c4817253c"}},[a("div",{staticClass:"sidebar-content"},[a("header",[a("router-link",{attrs:{to:"/"}},[a("div",[a("img",{staticClass:"title",attrs:{src:n("0954"),alt:"m"}})])])],1),t._m(0)])]),a("section",{staticClass:"content"},[t._m(1),a("nav",{staticClass:"auth-nav"},[a("p",{staticClass:"auth-link"},[t._v(" Need an account?"),a("router-link",{attrs:{to:"Signup"}},[t._v(" Signup")])],1)]),a("div",{staticClass:"content-main"},[a("div",{staticClass:"auth-content"},[a("h1",{staticClass:"subtitle-color roboto-medium"},[t._v("Sign in to PartyApp")]),a("form",{on:{submit:function(e){return e.preventDefault(),t.emailauth(e)}}},[a("div",{staticClass:"auth-form"},[a("div",{staticClass:"container"},[t._m(2),a("vs-input",{staticClass:"vv",attrs:{type:"text",placeholder:"Email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("label",{attrs:{for:"psw"}},[a("b",{staticClass:"subtitle-color"},[t._v("Password")]),a("p",{staticClass:"auth-forgot"},[a("router-link",{attrs:{to:"passreset"}},[t._v("Forgot password")])],1)]),a("vs-input",{attrs:{type:"password",placeholder:"Password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("div",{staticClass:"auth-buttons"},[a("button",{staticClass:"button email-auth",attrs:{type:"submit"}},[t._v("Login")]),a("button",{staticClass:"button google-auth",attrs:{type:"button"},on:{click:t.googleauth}},[t._m(3)])]),a("p",{staticClass:"auth-link-phone"},[a("router-link",{attrs:{to:"Signup"}},[t._v("Need an account?")])],1)],1)])])])])])])},A=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"side-art"},[n("h2",{staticClass:"side-art-subtitle"},[t._v("Never play alone")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"level m-nav"},[n("div",{staticClass:"level-left"},[n("div",{staticClass:"level-item"})])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{attrs:{for:"uname"}},[n("b",{staticClass:"subtitle-color"},[t._v("Email")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"icon"},[n("i",{staticClass:"bx bxl-google",staticStyle:{color:"#ffffff"}})])}],x=n("5530"),P=n("2f62"),E={metaInfo:{title:"PartyApp",titleTemplate:"%s | Signin",htmlAttrs:{lang:"en",amp:!0}},data:function(){return{email:"",password:"",error:""}},methods:Object(x["a"])(Object(x["a"])({},Object(P["b"])(["signInAction","googleAuthAction"])),{},{emailauth:function(){var t=this;this.signInAction({email:this.email,password:this.password}).then((function(){t.$router.push("/")}))},googleauth:function(){var t=this;this.googleAuthAction().then((function(){t.$router.push("/")}))}}),mounted:function(){var t=this,e=new Image;e.src=this.$refs.asyncImage.dataset.src,e.onload=function(){t.$refs.asyncImage.style.backgroundImage="url(".concat(t.$refs.asyncImage.dataset.src,")")}}},k=E,O=(n("3a1a"),Object(h["a"])(k,y,A,!1,null,"368480e3",null)),S=O.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("section",{ref:"asyncImage",staticClass:"sidebar",attrs:{"data-src":"https://firebasestorage.googleapis.com/v0/b/mifiy-2c32c.appspot.com/o/assets%2Fweb%2Fauth%2Flarge%2Fsignup.png?alt=media&token=a40eac3e-52cc-4a70-973a-741df1abc3c3"}},[a("div",{staticClass:"sidebar-content"},[a("header",[a("router-link",{attrs:{to:"/"}},[a("div",[a("img",{staticClass:"title",attrs:{src:n("0954"),alt:"m"}})])])],1),t._m(0)])]),a("section",{staticClass:"content"},[t._m(1),a("nav",{staticClass:"auth-nav"},[a("p",{staticClass:"auth-link"},[t._v(" Already a member? "),a("router-link",{attrs:{to:"Signin"}},[t._v("login")])],1)]),a("div",{staticClass:"content-main"},[a("div",{staticClass:"auth-content"},[a("h1",{staticClass:"subtitle-color roboto-medium"},[t._v("Sign up to PartyApp")]),a("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var n=e.handleSubmit;return[a("form",{on:{submit:function(e){return e.preventDefault(),n(t.emailauth)}}},[a("div",{staticClass:"auth-form"},[a("div",{staticClass:"container"},[a("label",{attrs:{for:"username"}},[a("b",[t._v("Username")])]),a("ValidationProvider",{attrs:{name:"username",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[a("b-field",{staticClass:"field",attrs:{type:"is-danger",message:n[0]}},[a("vs-input",{attrs:{type:"text",placeholder:"Username",maxlength:"15"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1)]}}],null,!0)}),a("label",{attrs:{for:"email"}},[a("b",[t._v("Email")])]),a("ValidationProvider",{attrs:{name:"email",rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[a("b-field",{staticClass:"field",attrs:{type:"is-danger",message:n[0]}},[a("vs-input",{attrs:{type:"text",placeholder:"Email",maxlength:"125"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1)]}}],null,!0)}),a("label",{attrs:{for:"psw"}},[a("b",[t._v("Password")])]),a("ValidationProvider",{attrs:{name:"password",rules:"required|min:8"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[a("b-field",{staticClass:"field",attrs:{type:"is-danger",message:n[0]}},[a("vs-input",{attrs:{type:"password",placeholder:"Password",maxlength:"30"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)]}}],null,!0)}),a("div",{staticClass:"auth-buttons"},[a("button",{staticClass:"button email-auth"},[t._v("Continue")]),a("button",{staticClass:"button google-auth",attrs:{type:"button"},on:{click:t.googleauth}},[a("span",{staticClass:"icon"},[a("i",{staticClass:"bx bxl-google",staticStyle:{color:"#ffffff"}})])])]),a("p",{staticClass:"auth-link-phone"},[a("router-link",{attrs:{to:"Signin"}},[t._v(" Already have an account?")])],1),a("p",{staticClass:"auth-terms"},[t._v(" By registering, you agree to Mifiy's "),a("router-link",{attrs:{to:"Signup"}},[t._v("Terms of Service")]),t._v(" and "),a("router-link",{attrs:{to:"Signup"}},[t._v("Privacy Policy")])],1)],1)])])]}}])})],1)])])])},I=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"side-art"},[n("h2",{staticClass:"side-art-subtitle"},[t._v("Need a player Two")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"level m-nav"},[n("div",{staticClass:"level-left"},[n("div",{staticClass:"level-item"})])])}],U=n("4c93");Object(a["c"])("email",U["a"]),Object(a["c"])("min",Object(x["a"])(Object(x["a"])({},U["b"]),{},{message:"min of 8 length"})),Object(a["c"])("required",Object(x["a"])(Object(x["a"])({},U["c"]),{},{message:"This field is required"}));var N={metaInfo:{title:"PartyApp",titleTemplate:"%s | Signup",htmlAttrs:{lang:"en",amp:!0}},components:{ValidationProvider:a["b"]},data:function(){return{email:"",password:"",error:"",username:""}},methods:Object(x["a"])({emailauth:function(){var t=this;this.signUpAction({email:this.email,password:this.password,username:this.username}).then((function(){t.$router.push("/")}))},googleauth:function(){var t=this;this.googleAuthAction().then((function(){t.$router.push("/")}))}},Object(P["b"])(["signUpAction","googleAuthAction"])),mounted:function(){var t=this,e=new Image;e.src=this.$refs.asyncImage.dataset.src,e.onload=function(){t.$refs.asyncImage.style.backgroundImage="url(".concat(t.$refs.asyncImage.dataset.src,")")}}},R=N,G=(n("75ef"),Object(h["a"])(R,j,I,!1,null,"91813fd8",null)),D=G.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[n("div",{staticClass:"party-content"},[n("div",{staticClass:"columns is-multiline"},[t._m(0),t._m(1),n("div",{staticClass:"column"},[n("audio",{ref:"localAudio",attrs:{controls:"",muted:""}})])]),n("div",t._l(t.peers,(function(e){return n("div",{key:e.userId},[n("div",[t._v(t._s(e.userId))]),n("audio",{attrs:{autoplay:"",controls:""},domProps:{srcObject:e.peerStream}})])})),0)])])},B=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"column"},[n("button",[t._v("call")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"column"},[n("button",[t._v("answer")])])}],$=n("1da1"),V=(n("159b"),n("99af"),n("bf19"),n("96cf"),n("1543")),T={iceServers:[{urls:["stun:stun1.l.google.com:19302","stun:stun2.l.google.com:19302"]}],iceCandidatePoolSize:10},F=null,z={data:function(){return{roomId:"",peers:{}}},methods:{init:function(){var t=this;this.roomId=this.$route.params.roomId,V["roomsCollection"].doc(this.roomId).get().then((function(e){e.exists?(t.registerNewConnections(),t.listenNewConnections()):(t.$router.push("/"),t.openNotification("Error","Party doesn't Exist".concat(t.roomId),"danger"))})),this.getUserMedia()},getUserMedia:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({video:!1,audio:{sampleSize:16,channelCount:2,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!1}});case 3:n=e.sent,e.next=10;break;case 6:e.prev=6,e.t0=e["catch"](0),console.log(e.t0),t.openNotification("Error","Permission denied. Refresh to try again.","danger");case 10:t.$refs.localAudio.srcObject=n,t.$refs.localAudio.volume=0,F=n;case 13:case"end":return e.stop()}}),e,null,[[0,6]])})))()},registerNewConnections:function(){var t=this;V["roomsCollection"].doc(this.roomId).get().then((function(e){var n=e.data(),a=n.players;a.forEach((function(e){if(e!==t.getUser.uid){t.initWebRTC(e);var n=new MediaStream;t.peers[e].peerStream=n,t.createOffer(t.peers[e],t.getUser.uid,e)}}))}))},createOffer:function(t,e,n){var a=this;return Object($["a"])(regeneratorRuntime.mark((function s(){var o,i,r,c,l;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return o=V["roomsCollection"].doc(a.roomId).collection("connections"),i=o.doc("user".concat(e,"user").concat(n)),F.getTracks().forEach((function(e){t.pc.addTrack(e,F)})),r=i.collection("callerCandidates"),t.pc.addEventListener("icecandidate",(function(t){if(t.candidate){var e=t.candidate.toJSON();r.add(e)}})),s.next=7,t.pc.createOffer();case 7:return c=s.sent,s.next=10,t.pc.setLocalDescription(c);case 10:return l={offer:{type:c.type,sdp:c.sdp},from:e,to:n},s.next=13,i.set(l);case 13:t.pc.addEventListener("track",(function(e){console.log("Got remote track:",e.streams[0]),e.streams[0].getTracks().forEach((function(e){console.log("Add a track to the remoteStream:",e),t.peerStream.addTrack(e)}))})),i.onSnapshot(function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(n){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=n.data(),t.pc.currentRemoteDescription||!a||!a.answer){e.next=6;break}return console.log("Got remote description: ",a.answer),s=new RTCSessionDescription(a.answer),e.next=6,t.pc.setRemoteDescription(s);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i.collection("calleeCandidates").onSnapshot((function(e){e.docChanges().forEach(function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("added"!==n.type){e.next=5;break}return a=n.doc.data(),console.log("Got new remote ICE candidate: ".concat(JSON.stringify(a))),e.next=5,t.pc.addIceCandidate(new RTCIceCandidate(a));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}));case 16:case"end":return s.stop()}}),s)})))()},listenNewConnections:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.getUser.uid,a=V["roomsCollection"].doc(t.roomId),a.collection("connections").onSnapshot((function(e){e.docChanges().forEach(function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(s){var o,i,r,c,l,u,d,f,m,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("added"!==s.type){e.next=30;break}if(o=s.doc.data(),o.to!==n){e.next=30;break}return t.initWebRTC(o.from),i=new MediaStream,t.peers[o.from].peerStream=i,console.log("Create PeerConnection with configuration: ",T),r=a.collection("connections"),c=r.doc("user".concat(o.from,"user").concat(n)),F.getTracks().forEach((function(e){t.peers[o.from].pc.addTrack(e,F)})),t.peers[o.from].pc.addEventListener("track",(function(e){console.log("Got remote track:",e.streams[0]),e.streams[0].getTracks().forEach((function(e){console.log("Add a track to the remoteStream:",e),t.peers[o.from].peerStream.addTrack(e)}))})),l=c.collection("calleeCandidates"),t.peers[o.from].pc.addEventListener("icecandidate",(function(t){t.candidate?(console.log("Got candidate: ",t.candidate),l.add(t.candidate.toJSON())):console.log("Got final candidate!")})),e.next=15,c.get();case 15:return u=e.sent,d=u.data(),f=d.offer,console.log("Got offer:",f),e.next=20,t.peers[o.from].pc.setRemoteDescription(new RTCSessionDescription(f));case 20:return e.next=22,t.peers[o.from].pc.createAnswer();case 22:return m=e.sent,console.log("Created answer:",m),e.next=26,t.peers[o.from].pc.setLocalDescription(m);case 26:return p={answer:{type:m.type,sdp:m.sdp}},e.next=29,c.update(p);case 29:c.collection("callerCandidates").onSnapshot((function(e){e.docChanges().forEach((function(e){if("added"===s.type){var n=e.doc.data();t.peers[o.from].pc.addIceCandidate(new RTCIceCandidate(n))}}))}));case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}));case 3:case"end":return e.stop()}}),e)})))()},initWebRTC:function(t){this.$set(this.peers,t,{userId:t,pc:new RTCPeerConnection(T),peerStream:void 0,peerVideo:void 0})},openNotification:function(t,e,n){this.$vs.notification({title:t,text:e,position:"bottom-center",color:n})}},computed:Object(x["a"])({},Object(P["c"])(["getUser"])),mounted:function(){this.init()}},H=z,W=(n("104d"),Object(h["a"])(H,L,B,!1,null,null,null)),M=W.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[n("topNav"),n("div",{staticClass:"main-content"},[n("router-view")],1)],1)},q=[],J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vs-navbar",{attrs:{color:"#2F3247","text-white":"",square:"","center-collapsed":""},scopedSlots:t._u([{key:"left",fn:function(){return[a("div",{staticClass:"partyapp-logo-container"},[a("img",{staticClass:"partyapp-logo",attrs:{src:n("5244"),alt:""},on:{click:t.goHome}})])]},proxy:!0},{key:"right",fn:function(){return[a("div",{staticClass:"userTab"},[t.isUserAuth?a("userTab"):a("button",{on:{click:t.openLogin}},[t._v("Log in")])],1)]},proxy:!0}])},[a("div",[a("select",{directives:[{name:"model",rawName:"v-model",value:t.curGame,expression:"curGame"}],on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.curGame=e.target.multiple?n:n[0]},t.setGame]}},[a("option",{attrs:{disabled:""},domProps:{value:{}}},[t._v("Select Game")]),t._l(t.getGames,(function(e){return a("option",{key:e.gameId,domProps:{value:e}},[t._v(" "+t._s(e.gameName)+" ")])}))],2)])])},Q=[],Z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"user-avatar"},[n("vs-tooltip",{staticClass:"username-text",attrs:{bottom:"",shadow:"",interactivit:"","not-hover":""},scopedSlots:t._u([{key:"tooltip",fn:function(){return[n("div",{staticClass:"content-tooltip"},[n("div",{staticClass:"prof-top"},[n("div",{staticClass:"prof-tob-content"},[n("div",{staticClass:"avatar-container"},[n("vs-avatar",{attrs:{size:"60",color:"#2B2E43",circle:""},scopedSlots:t._u([t.getProfile.avatar?null:{key:"text",fn:function(){return[t._v(" "+t._s(t.getProfile.username)+" ")]},proxy:!0}],null,!0)},[t.getProfile.avatar?n("img",{attrs:{src:""+t.getProfile.avatar,alt:"profile image"}}):t._e()])],1),n("h5",{staticClass:"username-text"},[t._v(" "+t._s(t.getProfile.username+"#"+t.getProfile.tag)+" ")]),n("vs-button",{attrs:{main:"",flat:""},on:{click:function(e){t.settingScreen=!t.settingScreen}}},[t._v(" Manage your account ")])],1)]),n("div",{staticClass:"prof-mid"}),n("div",{staticClass:"prof-bot"}),n("footer",{staticClass:"clickable",staticStyle:{color:"#626891"}},[n("p",[t._v("Privacy policy")])])])]},proxy:!0}]),model:{value:t.activeProfile,callback:function(e){t.activeProfile=e},expression:"activeProfile"}},[n("vs-avatar",{attrs:{size:"38",color:"#2B2E43",badge:"",circle:"","badge-color":"success","badge-position":"bottom-left"},on:{click:function(e){t.activeProfile=!t.activeProfile}},scopedSlots:t._u([t.getProfile.avatar?null:{key:"text",fn:function(){return[t._v(" "+t._s(t.getProfile.username)+" ")]},proxy:!0}],null,!0)},[t.getProfile.avatar?n("img",{attrs:{src:""+t.getProfile.avatar,alt:"profile image"}}):t._e()])],1)],1),n("vs-dialog",{staticClass:"full-screen-dialog",attrs:{square:"","full-screen":"","not-close":""},model:{value:t.settingScreen,callback:function(e){t.settingScreen=e},expression:"settingScreen"}},[n("div",{staticClass:"settings-view"},[n("div",{staticClass:"setting-close"},[n("div",{staticClass:"setting-close-button"},[n("vs-avatar",{attrs:{circle:"",color:"#2B2E43"},on:{click:function(e){t.settingScreen=!t.settingScreen}}},[n("i",{staticClass:"bx bx-x",staticStyle:{color:"#ffffff"}})])],1)]),n("settings")],1)])],1)},K=[],X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[n("div",{staticClass:"setting-left"},[n("div",{staticClass:"setting-menu"},[n("div",{staticClass:"setting-menu-item roboto-medium clickable",class:t.classObject(0),on:{click:function(e){t.settingPosition=0}}},[t._v(" Username & Avatar ")]),n("div",{staticClass:"setting-menu-item roboto-medium clickable",class:t.classObject(1),on:{click:function(e){t.settingPosition=1}}},[t._v(" Account Information ")]),n("div",{staticClass:"setting-menu-item roboto-medium clickable",class:t.classObject(2),on:{click:function(e){t.settingPosition=2}}},[t._v(" Password ")]),n("div",{staticClass:"setting-menu-item roboto-medium clickable"},[t._v("Help")]),n("div",{staticClass:"setting-menu-item-logout roboto-medium clickable",on:{click:t.signOut}},[t._v(" Log Out ")])])]),n("div",{staticClass:"setting-right"},[n("div",{staticClass:"left-content"},[0===t.settingPosition?n("settingsName"):t._e(),1===t.settingPosition?n("settingsAccount"):t._e(),2===t.settingPosition?n("settingsPassword"):t._e()],1)])])},tt=[],et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"settings-name-main"},[n("div",{staticClass:"content-main"},[n("div",{staticClass:"content-container"},[t._m(0),n("input",{directives:[{name:"model",rawName:"v-model",value:t.uname,expression:"uname"}],staticClass:"content-input",attrs:{type:"text",placeholder:t.getProfile.username},domProps:{value:t.uname},on:{input:[function(e){e.target.composing||(t.uname=e.target.value)},t.isChanged]}})]),n("div",{staticClass:"content-container"},[t._m(1),n("div",{staticClass:"content-avatar-bg"},[n("vs-avatar",{attrs:{for:"upload",size:"132",circle:"",color:"#224168"}},[t.getProfile.avatar?t._e():n("i",{staticClass:"bx bx-plus",staticStyle:{color:"#0291f4"}}),t.getProfile.avatar?n("img",{attrs:{src:""+t.getProfile.avatar,alt:"profile image"}}):t._e(),n("input",{ref:"FileInput",staticClass:"upload-input clickable",attrs:{type:"file",accept:"image/png, image/jpeg, image/gif, image/jpg"},on:{change:t.setImage}})])],1)]),t.isActive?n("div",{staticClass:"content-container"},[n("button",{staticClass:"content-save roboto-medium",on:{click:t.updateInfo}},[t._v(" save ")])]):t._e()]),n("vs-dialog",{ref:"editImage",attrs:{"not-close":""},model:{value:t.isEdit,callback:function(e){t.isEdit=e},expression:"isEdit"}},[n("div",{staticClass:"editImage-main"},[n("div",{staticClass:"editImage-top"},[n("div",{staticClass:"addFriend-top-button"},[n("vs-avatar",{attrs:{circle:"",color:"#2B2E43"},on:{click:function(e){t.isEdit=!t.isEdit}}},[n("i",{staticClass:"bx bx-x",staticStyle:{color:"#ffffff"}})])],1)]),n("div",{staticClass:"editImage-content"},[n("div",[n("div",{staticClass:"editImage-cropper"},[n("vue-cropper",{ref:"cropper",attrs:{fixedNumber:t.option.fixedNumber,img:t.imgSrc,info:t.option.info,autoCrop:t.option.autoCrop,autoCropWidth:t.option.autoCropWidth,autoCropHeight:t.option.autoCropHeight,fixedBox:t.option.fixedBox,fixed:t.option.fixed}})],1),n("button",{ref:"button",staticClass:"editImage-upload roboto-medium",on:{click:t.uploadImage}},[t._v(" upload ")])])])])])],1)},nt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-text"},[n("h1",{staticClass:"content-title roboto-medium"},[t._v("Username")]),n("h3",{staticClass:"content-subtitle roboto-medium"},[t._v(" Your username is always public ")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-text"},[n("h1",{staticClass:"content-title roboto-medium"},[t._v("Avatar")]),n("h3",{staticClass:"content-subtitle roboto-medium"},[t._v(" Try to be appropriate🤘 ")])])}],at={name:"settings-name-page",components:{VueCropper:u["VueCropper"]},data:function(){return{uname:"",isActive:!1,isEdit:!1,imgSrc:"",option:{autoCrop:!0,autoCropWidth:200,autoCropHeight:200,fixedNumber:[1,1],fixed:!0,info:!1}}},methods:{savesettings:function(){},isChanged:function(){this.uname.length>1?this.isActive=!0:this.isActive=!1},setImage:function(t){var e=this;console.log("HELOOOOOO"),this.isEdit=!0;var n=t.target.files[0];if(!/\.(jpg|jpeg|png|bmp|JPG|PNG)$/.test(t.target.value))return this.openNotification("failed","jpeg,jpg,png,bmp","danger"),this.isEdit=!this.isEdit,!1;if("function"===typeof FileReader){var a=new FileReader;a.onload=function(t){e.imgSrc=t.target.result,e.$refs.cropper.refresh()},a.readAsDataURL(n)}else this.openNotification("failed","Sorry, FileReader API not supported","danger");t.target.value=""},uploadImage:function(){var t=this;this.$refs.cropper.getCropBlob((function(e){var n=V["storage"].ref(),a="users/avatars/".concat(t.getUser.uid),s={contentType:e.type};t.openLoadingCropper();var o=n.child(a).put(e,s);o.then((function(t){return t.ref.getDownloadURL()})).then((function(e){V["usersCollection"].doc(t.getUser.uid).update({avatar:e}).then({}),t.openNotification("Success","Avater was upload","success"),t.isEdit=!t.isEdit})).catch(console.error)}))},openNotification:function(t,e,n){this.$vs.notification({title:t,text:e,position:"bottom-center",color:n})},updateInfo:function(){var t=this;V["usersCollection"].doc(this.getUser.uid).update({username:this.uname}).then((function(){t.openNotification("Success","username was update","success"),t.uname="",t.isActive=!1}))},openLoadingCropper:function(){var t=this.$vs.loading({target:this.$refs.editImage,scale:"0.6",background:"primary",opacity:1,color:"#fff"});setTimeout((function(){t.close()}),3e3)}},computed:Object(x["a"])({},Object(P["c"])(["getProfile","getUser"])),mounted:function(){}},st=at,ot=(n("f812"),Object(h["a"])(st,et,nt,!1,null,"5f8e977b",null)),it=ot.exports,rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"settings-account-main"},[n("div",{staticClass:"content-main"},[n("div",{staticClass:"content-container"},[t._m(0),n("input",{staticClass:"content-input",attrs:{placeholder:"Date",type:"text",onfocus:"(this.type='date')",id:"date",min:t.minDate,max:t.maxDate},on:{input:function(e){return t.isChanged("date")}}})]),t.isGoogle?n("div",{staticClass:"content-google"},[t._m(2)]):n("div",{staticClass:"content-container"},[t._m(1),n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"content-input",attrs:{type:"email",placeholder:t.userProfile.email},domProps:{value:t.email},on:{input:[function(e){e.target.composing||(t.email=e.target.value)},function(e){return t.isChanged("email")}]}})]),t.isActive?n("div",{staticClass:"content-container"},[n("button",{staticClass:"content-save roboto-medium"},[t._v("save")])]):t._e()])])},ct=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-text"},[n("h1",{staticClass:"content-title roboto-medium"},[t._v("Birth Date")]),n("h3",{staticClass:"content-subtitle roboto-medium"},[t._v(" Your birthdate is always private ")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-text"},[n("h1",{staticClass:"content-title roboto-medium"},[t._v("Email")]),n("h3",{staticClass:"content-subtitle roboto-medium"},[t._v(" Don't worry we won't go crazy ")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"con-google-main"},[n("div",[t._v(" 🔒 email locked, signed in with google, account provider linking coming soon... ")])])}],lt={name:"settings-account-page",data:function(){var t=new Date;return{email:"",sex:"",minDate:new Date(t.getFullYear()-80,t.getMonth(),t.getDate()),maxDate:new Date(t.getFullYear()+13,t.getMonth(),t.getDate()),isActive:!1,isGoogle:"google.com"===V["auth"].currentUser.providerData[0].providerId}},methods:{savesettings:function(){},init:function(){this.sex=this.userProfile.sex},isChanged:function(t){if("email"===t){var e=/^[\-0-9a-zA-Z\.\+_]+@[\-0-9a-zA-Z\.\+_]+\.[a-zA-Z]{2,}$/;this.email.length>0&&e.test(this.email)?this.isActive=!0:this.isActive=!1}},openNotification:function(t,e,n){this.$vs.notification({title:t,text:e,position:"bottom-center",color:n})},updateInfo:function(){var t=this;V["auth"].currentUser.updateEmail(this.email).then((function(){V["usersCollection"].doc(t.currentUser.uid).update({email:t.email}).then((function(){t.openNotification("Success","email was update","success"),t.email=""}))})).catch((function(e){t.openNotification("failed",e,"danger")}))}},mounted:function(){this.init();var t=V["auth"].currentUser.providerData;console.log("Sign-in provider: ".concat(t[0].providerId))},computed:Object(x["a"])({},Object(P["d"])(["userProfile"]))},ut=lt,dt=(n("b64c"),Object(h["a"])(ut,rt,ct,!1,null,"14d47cba",null)),ft=dt.exports,mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"settings-password-main"},[t.isGoogle?n("div",{staticClass:"content-main"},[t._m(3)]):n("div",{staticClass:"content-main"},[n("div",{staticClass:"content-container"},[t._m(0),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password1,expression:"password1"}],staticClass:"content-input",attrs:{type:"password",placeholder:"*******************"},domProps:{value:t.password1},on:{input:[function(e){e.target.composing||(t.password1=e.target.value)},t.isChanged]}})]),n("div",{staticClass:"content-container"},[t._m(1),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password2,expression:"password2"}],staticClass:"content-input",attrs:{type:"password",placeholder:"*******************"},domProps:{value:t.password2},on:{input:[function(e){e.target.composing||(t.password2=e.target.value)},t.isChanged]}})]),n("div",{staticClass:"content-container"},[t._m(2),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password3,expression:"password3"}],staticClass:"content-input",attrs:{type:"password",placeholder:"*******************"},domProps:{value:t.password3},on:{input:[function(e){e.target.composing||(t.password3=e.target.value)},t.isChanged]}})]),t.isActive?n("div",{staticClass:"content-container"},[n("button",{staticClass:"content-save roboto-medium",on:{click:t.updateInfo}},[t._v(" save ")])]):t._e()])])},pt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-text"},[n("h1",{staticClass:"content-title roboto-medium"},[t._v("Current Password")]),n("h3",{staticClass:"content-subtitle roboto-medium"},[t._v(" Please type your current password ")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-text"},[n("h1",{staticClass:"content-title roboto-medium"},[t._v("New Password")]),n("h3",{staticClass:"content-subtitle roboto-medium"},[t._v(" Please type your new password ")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-text"},[n("h1",{staticClass:"content-title roboto-medium"},[t._v("Confirm New Password")]),n("h3",{staticClass:"content-subtitle roboto-medium"},[t._v(" Please re-type your new password ")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-google"},[n("div",{staticClass:"con-google-main"},[n("div",[t._v(" 🔒 password locked, signed in with google, account provider linking coming soon... ")])])])}],vt={name:"settings-password-page",data:function(){return{password1:"",password2:"",password3:"",isActive:!1,isGoogle:"google.com"===V["auth"].currentUser.providerData[0].providerId}},methods:{savesettings:function(){},isChanged:function(){this.password1.length>7&&this.password2.length>7&&this.password3.length>7&&this.password2===this.password3?this.isActive=!0:this.isActive=!1},openNotification:function(t,e,n){this.$vs.notification({title:t,text:e,position:"bottom-center",color:n})},updateInfo:function(){var t=this,e=V["auth"].EmailAuthProvider.credential(V["auth"].currentUser.email,this.password1);V["auth"].currentUser.reauthenticateWithCredential(e).then((function(){t.openNotification("success","worked","success")})).catch((function(e){t.openNotification("failed",e,"danger")}))}}},gt=vt,ht=(n("5370"),Object(h["a"])(gt,mt,pt,!1,null,"9f727ebe",null)),bt=ht.exports,Ct={components:{settingsName:it,settingsAccount:ft,settingsPassword:bt},data:function(){return{settingPosition:0,isLogout:!1,isHelp:!1}},methods:{signOut:function(){this.$store.dispatch("signOutAction")},classObject:function(t){return{selected:this.settingPosition===t}}}},_t=Ct,wt=(n("1a9b"),Object(h["a"])(_t,X,tt,!1,null,"64467eae",null)),yt=wt.exports,At={name:"user_tab",data:function(){return{activeProfile:!1,settingScreen:!1}},computed:Object(x["a"])({},Object(P["c"])(["getProfile"])),components:{settings:yt}},xt=At,Pt=(n("f0f2"),Object(h["a"])(xt,Z,K,!1,null,null,null)),Et=Pt.exports,kt={name:"top_nav",data:function(){return{curGame:{},activeProfile:!1,settingScreen:!1}},methods:{openLogin:function(){this.$router.push("/signin")},logout:function(){this.signOutAction()},goHome:function(){this.$router.push("/")},setGame:function(){this.$store.commit("setGame",this.curGame)}},components:{userTab:Et},computed:Object(x["a"])({},Object(P["c"])(["isUserAuth","getGames"]))},Ot=kt,St=(n("13de"),Object(h["a"])(Ot,J,Q,!1,null,"2731328e",null)),jt=St.exports,It={components:{topNav:jt}},Ut=It,Nt=(n("d6bf"),Object(h["a"])(Ut,Y,q,!1,null,"39d6bc3c",null)),Rt=Nt.exports,Gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[n("topNav"),n("div",{staticClass:"main-content"},[n("div",{staticClass:"party-types"},[n("div",{staticClass:"host-content party-type-host"},[n("div",{staticClass:"content-host-button roboto-medium"},[t._v("Host")]),n("div",{staticClass:"content-container"},[t._m(0),n("b-slider",{attrs:{min:2,max:t.getGame.maxPlayers,ticks:"",rounded:""},model:{value:t.players,callback:function(e){t.players=e},expression:"players"}})],1),n("div",{staticClass:"content-container"},[n("button",{staticClass:"content-create roboto-medium",on:{click:t.host}},[t._v("create")])])]),n("button",{staticClass:"party-type-button party-type-join roboto-medium",on:{click:t.join}},[t._v(" Join ")])])])],1)},Dt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-text"},[n("h1",{staticClass:"content-title roboto-medium"},[t._v("Needed Players")]),n("h3",{staticClass:"content-subtitle roboto-medium"},[t._v(" How big is your party going to be? ")])])}],Lt={components:{topNav:jt},data:function(){return{voiceLink:"",players:2}},methods:Object(x["a"])(Object(x["a"])({},Object(P["b"])(["hostGameAction"])),{},{join:function(){var t=this,e=p["a"].firestore.Timestamp.fromDate(new Date),n=V["playersCollection"].doc(),a=n.id;V["playersCollection"].doc(a).set({userId:this.getUser.uid,game:this.getGame.gameId,createdAt:e,size:this.players}).then((function(){V["playersCollection"].doc(a).onSnapshot((function(e){var n=e.data(),a=n.roomId;""!==a&&V["roomsCollection"].doc(a).onSnapshot((function(e){var n=e.data().full;n&&(t.$store.commit("setRoom",{roomId:a}),t.$router.push("/crew/".concat(a)))}))}))}))},host:function(){var t=this;this.hostGameAction({game:this.getGame.gameId,players:[this.getUser.uid],size:this.players}).then((function(){V["roomsCollection"].doc(t.getRoom).onSnapshot((function(e){var n=e.data().full;n&&t.$router.push("/crew/".concat(t.getRoom))}))}))}}),computed:Object(x["a"])({},Object(P["c"])(["getUser","getGame","getRoom"]))},Bt=Lt,$t=(n("93e0"),Object(h["a"])(Bt,Gt,Dt,!1,null,"dec129be",null)),Vt=$t.exports;s["default"].use(w["a"]);var Tt=[{path:"/",name:"Home",component:Vt},{path:"/signin",name:"Signin",component:S},{path:"/signup",name:"Signup",component:D},{path:"/crew",name:"crew",component:Rt,children:[{path:"/crew/:roomId",name:"party",component:M}]}],Ft=new w["a"]({mode:"history",base:"/",routes:Tt});Ft.beforeEach((function(t,e,n){var a=t.matched.some((function(t){return t.meta.requiresAuth})),s=p["a"].auth().currentUser;console.log("isauthenticated",s),a&&!s?n("/signin"):n()}));var zt=Ft,Ht=n("3317"),Wt=Object(x["a"])({setUser:function(t,e){t.user=e},setError:function(t,e){t.error=e},setGame:function(t,e){t.currentGame=e},setRoom:function(t,e){t.room=e}},Ht["b"]),Mt=Wt,Yt=(n("d3b7"),new p["a"].auth.GoogleAuthProvider),qt={signUpAction:function(t,e){var n=t.commit;return new Promise((function(t,a){p["a"].auth().createUserWithEmailAndPassword(e.email,e.password).then((function(a){n("setUser",a.user),V["usersCollection"].doc(a.user.uid).set({username:e.username,email:e.email,tag:Math.floor(1e3+9e3*Math.random()),sex:"",dataofbirth:"",avatar:"",mfa_enabled:!1,premiumType:"",flags:0,userId:a.user.uid}).then((function(){t()}))})).catch((function(t){n("setError",t.message),a(t)}))}))},signInAction:function(t,e){var n=t.commit;return new Promise((function(t,a){p["a"].auth().signInWithEmailAndPassword(e.email,e.password).then((function(e){n("setUser",e.user),t()})).catch((function(t){n("setError",t.message),a(t)}))}))},signOutAction:function(t){var e=t.commit;p["a"].auth().signOut().then((function(){e("setUser",null)})).catch((function(t){e("setError",t.message)}))},googleAuthAction:function(t){var e=t.commit;return new Promise((function(t,n){p["a"].auth().signInWithPopup(Yt).then((function(n){var a=n.user,s=V["usersCollection"].doc(n.user.uid);s.get().then((function(o){o.exists?(e("setUser",n.user),t()):s.set({name:a.displayName,email:a.email,tag:Math.floor(1e3+9e3*Math.random()),sex:"",dataofbirth:"",avatar:a.photoURL,mfa_enabled:!1,premiumType:"",flags:0,userId:a.uid}).then((function(){e("setUser",n.user),t()}))}))})).catch((function(t){e("setError",t.message),n(t)}))}))},bindUserProfileRef:Object(Ht["a"])((function(t){var e=t.state,n=t.bindFirestoreRef;return n("userProfile",V["usersCollection"].doc(e.user.uid))})),bindGameRef:Object(Ht["a"])((function(t){var e=t.bindFirestoreRef;return e("gamesList",V["gamesCollection"])})),hostGameAction:function(t,e){var n=t.commit,a=p["a"].firestore.Timestamp.fromDate(new Date);return new Promise((function(t,s){V["roomsCollection"].add({createdAt:a,game:e.game,players:e.players,size:e.size,full:!1}).then((function(e){n("setRoom",e.id),t()})).catch((function(t){s(t)}))}))}},Jt=qt,Qt={getUser:function(t){return t.user},isUserAuth:function(t){return!!t.user},getError:function(t){return t.error},getProfile:function(t){return t.userProfile},getGames:function(t){return t.gamesList},getGame:function(t){return t.currentGame},getRoom:function(t){return t.room}},Zt=Qt;s["default"].use(P["a"]);var Kt,Xt=new P["a"].Store({state:{user:null,error:null,userProfile:{},gamesList:[],currentGame:{},room:""},mutations:Mt,actions:Jt,getters:Zt,modules:{}}),te=n("1543");s["default"].config.productionTip=!1,s["default"].component("ValidationProvider",a["b"]),s["default"].component("ValidationObserver",a["a"]),s["default"].use(d.a),s["default"].use(i.a),s["default"].use(r["a"]),s["default"].use(c["a"]),s["default"].use(l["a"]),te.auth.onAuthStateChanged((function(){Kt||(Kt=new s["default"]({router:zt,store:Xt,render:function(t){return t(C)}}).$mount("#app"))}))},"5c0b":function(t,e,n){"use strict";n("9c0c")},"5c55":function(t,e,n){},"6e42":function(t,e,n){},"75ef":function(t,e,n){"use strict";n("ca9c")},"93e0":function(t,e,n){"use strict";n("6e42")},"9c0c":function(t,e,n){},b5cc:function(t,e,n){},b64c:function(t,e,n){"use strict";n("5c55")},b78a:function(t,e,n){},b8cb:function(t,e,n){},c51e:function(t,e,n){},ca9c:function(t,e,n){},d6bf:function(t,e,n){"use strict";n("1f36")},f0f2:function(t,e,n){"use strict";n("09a4")},f812:function(t,e,n){"use strict";n("b8cb")}});
//# sourceMappingURL=app.fdd01285.js.map